{% extends 'base.html' %}
{% load static %}

{% block title %}Join ROREM - Sign Up{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
            <!-- Header Card -->
            <div class="card border-0 shadow-lg mb-4">
                <div class="card-body text-center p-5" style="background: linear-gradient(135deg, #1a3a2a 0%, #2d5a3d 100%);">
                    <div class="mb-4">
                        <div class="logo-container mb-3">
                            <div class="logo-icon">
                                <i class="fas fa-car-side"></i>
                            </div>
                        </div>
                        <h1 class="h3 fw-bold mb-2 text-white">Join ROREM Ghana</h1>
                        <p class="text-light opacity-90">Create your account and get help when you need it most</p>
                    </div>
                </div>
            </div>

            <!-- Registration Form Card -->
            <div class="card border-0 shadow-lg">
                <div class="card-body p-5">
                    <form method="post" class="needs-validation" novalidate>
                        {% csrf_token %}
                        
                        <!-- Account Type Selection -->
                        <div class="mb-4">
                            <label class="form-label fw-semibold mb-3 text-navy-green">I am a:</label>
                            <div class="row g-3">
                                <div class="col-6">
                                    <input type="radio" class="btn-check" name="user_type" id="driver" value="driver" checked>
                                    <label class="btn btn-outline-success w-100 h-100 p-3" for="driver">
                                        <i class="fas fa-user fa-2x mb-2"></i>
                                        <span class="d-block fw-semibold">Driver</span>
                                        <small class="text-muted">Need assistance</small>
                                    </label>
                                </div>
                                <div class="col-6">
                                    <input type="radio" class="btn-check" name="user_type" id="provider" value="provider">
                                    <label class="btn btn-outline-success w-100 h-100 p-3" for="provider">
                                        <i class="fas fa-tools fa-2x mb-2"></i>
                                        <span class="d-block fw-semibold">Service Provider</span>
                                        <small class="text-muted">Offer help</small>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <!-- Basic Information -->
                        <div class="row g-3 mb-4">
                            <div class="col-md-6">
                                <label class="form-label fw-semibold text-navy-green">
                                    <i class="fas fa-user me-2"></i>Username
                                </label>
                                <div class="input-group input-group-modern">
                                    <span class="input-group-text">
                                        <i class="fas fa-user"></i>
                                    </span>
                                    <input type="text" name="username" class="form-control modern-input" placeholder="Enter your username" required>
                                </div>
                                <div class="form-text text-muted">Choose a unique username</div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-semibold text-navy-green">
                                    <i class="fas fa-phone me-2"></i>Phone Number
                                </label>
                                <div class="input-group input-group-modern">
                                    <span class="input-group-text">
                                        <i class="fas fa-mobile-alt"></i>
                                    </span>
                                    <input type="tel" name="phone_number" class="form-control modern-input" placeholder="+233 XX XXX XXXX" required>
                                </div>
                                <div class="form-text text-muted">We'll never share your number</div>
                            </div>
                        </div>

                        <!-- Email Information -->
                        <div class="row g-3 mb-4">
                            <div class="col-md-6">
                                <label class="form-label fw-semibold text-navy-green">
                                    <i class="fas fa-envelope me-2"></i>Email Address
                                </label>
                                <div class="input-group input-group-modern">
                                    <span class="input-group-text">
                                        <i class="fas fa-at"></i>
                                    </span>
                                    <input type="email" name="email" class="form-control modern-input" placeholder="your @email.com" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-semibold text-navy-green">
                                    <i class="fas fa-map-marker-alt me-2"></i>Address
                                </label>
                                <div class="input-group input-group-modern">
                                    <span class="input-group-text">
                                        <i class="fas fa-location-dot"></i>
                                    </span>
                                    <input type="text" name="address" class="form-control modern-input" placeholder="Your full address" required>
                                </div>
                            </div>
                        </div>

                        <!-- Password Information -->
                        <div class="row g-3 mb-4">
                            <div class="col-md-6">
                                <label class="form-label fw-semibold text-navy-green">
                                    <i class="fas fa-lock me-2"></i>Password
                                </label>
                                <div class="input-group input-group-modern">
                                    <span class="input-group-text">
                                        <i class="fas fa-key"></i>
                                    </span>
                                    <input type="password" name="password1" class="form-control modern-input" placeholder="Create a strong password" required>
                                    <button class="btn btn-toggle-password" type="button" data-target="password1">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label fw-semibold text-navy-green">
                                    <i class="fas fa-lock me-2"></i>Confirm Password
                                </label>
                                <div class="input-group input-group-modern">
                                    <span class="input-group-text">
                                        <i class="fas fa-key"></i>
                                    </span>
                                    <input type="password" name="password2" class="form-control modern-input" placeholder="Confirm your password" required>
                                    <button class="btn btn-toggle-password" type="button" data-target="password2">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Driver Specific Fields -->
                        <div id="driver-fields">
                            <div class="row g-3 mb-4">
                                <div class="col-md-6">
                                    <label class="form-label fw-semibold text-navy-green">
                                        <i class="fas fa-car me-2"></i>Vehicle Type
                                    </label>
                                    <div class="input-group input-group-modern">
                                        <span class="input-group-text">
                                            <i class="fas fa-car"></i>
                                        </span>
                                        <input type="text" name="vehicle_type" class="form-control modern-input" placeholder="e.g., Toyota Corolla">
                                    </div>
                                    <div class="form-text text-muted">What type of vehicle do you drive?</div>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label fw-semibold text-navy-green">
                                        <i class="fas fa-tag me-2"></i>License Plate
                                    </label>
                                    <div class="input-group input-group-modern">
                                        <span class="input-group-text">
                                            <i class="fas fa-id-card"></i>
                                        </span>
                                        <input type="text" name="license_plate" class="form-control modern-input" placeholder="e.g., GT 1234 XYZ">
                                    </div>
                                    <div class="form-text text-muted">Your vehicle registration number</div>
                                </div>
                            </div>
                        </div>

                        <!-- Provider Specific Fields -->
                        <div id="provider-fields" style="display: none;">
                            <div class="row g-3 mb-4">
                                <div class="col-md-6">
                                    <label class="form-label fw-semibold text-navy-green">
                                        <i class="fas fa-store me-2"></i>Company Name
                                    </label>
                                    <div class="input-group input-group-modern">
                                        <span class="input-group-text">
                                            <i class="fas fa-building"></i>
                                        </span>
                                        <input type="text" name="company_name" class="form-control modern-input" placeholder="Your business name">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label fw-semibold text-navy-green">
                                        <i class="fas fa-tools me-2"></i>Services Offered
                                    </label>
                                    <div class="input-group input-group-modern">
                                        <span class="input-group-text">
                                            <i class="fas fa-cog"></i>
                                        </span>
                                        {{ form.services.as_widget }}
                                    </div>
                                </div>
                            </div>
                            <div class="mb-4">
                                <label class="form-label fw-semibold text-navy-green">
                                    <i class="fas fa-phone me-2"></i>Business Phone
                                </label>
                                <div class="input-group input-group-modern">
                                    <span class="input-group-text">
                                        <i class="fas fa-phone"></i>
                                    </span>
                                    <input type="tel" name="phone" class="form-control modern-input" placeholder="Business phone number">
                                </div>
                            </div>
                        </div>

                        <!-- Terms and Conditions -->
                        <div class="form-check mb-4">
                            <input class="form-check-input" type="checkbox" id="terms" required>
                            <label class="form-check-label small text-muted" for="terms">
                                I agree to the <a href="#" class="text-navy-green fw-semibold">Terms of Service</a> and <a href="#" class="text-navy-green fw-semibold">Privacy Policy</a>
                            </label>
                        </div>

                        <!-- Submit Button -->
                        <button type="submit" class="btn btn-success btn-lg w-100 py-3 fw-semibold btn-modern">
                            <i class="fas fa-user-plus me-2"></i>Create Account
                        </button>

                        <!-- Login Link -->
                        <div class="text-center mt-4">
                            <p class="text-muted mb-0">
                                Already have an account? 
                                <a href="{% url 'login' %}" class="fw-semibold text-navy-green">Login here</a>
                            </p>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Features Grid -->
            <div class="row mt-4 g-3">
                <div class="col-md-4">
                    <div class="text-center p-3">
                        <div class="feature-icon mb-2">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <h6 class="fw-semibold mb-1 text-navy-green">Verified Providers</h6>
                        <small class="text-muted">All service providers are verified</small>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="text-center p-3">
                        <div class="feature-icon mb-2">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <h6 class="fw-semibold mb-1 text-navy-green">Quick Response</h6>
                        <small class="text-muted">Average response time 15 minutes</small>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="text-center p-3">
                        <div class="feature-icon mb-2">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <h6 class="fw-semibold mb-1 text-navy-green">Nationwide</h6>
                        <small class="text-muted">Coverage across Ghana</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const userTypeSelect = document.querySelectorAll('input[name="user_type"]');
        const driverFields = document.getElementById('driver-fields');
        const providerFields = document.getElementById('provider-fields');
        
        function toggleFields() {
            const value = document.querySelector('input[name="user_type"]:checked').value;
            driverFields.style.display = value === 'driver' ? 'block' : 'none';
            providerFields.style.display = value === 'provider' ? 'block' : 'none';
        }
        
        userTypeSelect.forEach(radio => {
            radio.addEventListener('change', toggleFields);
        });
        
        // Password toggle functionality
        document.querySelectorAll('.btn-toggle-password').forEach(button => {
            button.addEventListener('click', function() {
                const target = this.getAttribute('data-target');
                const passwordField = document.querySelector(`input[name="${target}"]`);
                const icon = this.querySelector('i');
                
                if (passwordField.type === 'password') {
                    passwordField.type = 'text';
                    icon.classList.remove('fa-eye');
                    icon.classList.add('fa-eye-slash');
                    this.classList.add('active');
                } else {
                    passwordField.type = 'password';
                    icon.classList.remove('fa-eye-slash');
                    icon.classList.add('fa-eye');
                    this.classList.remove('active');
                }
            });
        });
        
        // Form validation
        const form = document.querySelector('.needs-validation');
        form.addEventListener('submit', function(event) {
            if (!form.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();
            }
            form.classList.add('was-validated');
        });
        
        // Add floating label effect
        document.querySelectorAll('.modern-input').forEach(input => {
            input.addEventListener('focus', function() {
                this.parentElement.classList.add('focused');
            });
            
            input.addEventListener('blur', function() {
                if (this.value === '') {
                    this.parentElement.classList.remove('focused');
                }
            });
            
            // Check initial state
            if (input.value !== '') {
                input.parentElement.classList.add('focused');
            }
        });
        
        // Initialize
        toggleFields();
    });
</script>

<style>
    :root {
        --navy-green: #1a3a2a;
        --navy-green-light: #2d5a3d;
        --navy-green-lighter: #3e7a4f;
        --navy-green-very-light: #e8f5e8;
        --border-color: #d1d5db;
        --focus-shadow: rgba(26, 58, 42, 0.1);
    }
    
    .text-navy-green {
        color: var(--navy-green) !important;
    }
    
    .logo-container {
        display: flex;
        justify-content: center;
    }
    
    .logo-icon {
        width: 80px;
        height: 80px;
        background: linear-gradient(135deg, var(--navy-green) 0%, var(--navy-green-light) 100%);
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 2rem;
        box-shadow: 0 8px 25px rgba(26, 58, 42, 0.3);
    }
    
    /* Modern Input Styles */
    .input-group-modern {
        position: relative;
        margin-bottom: 1rem;
    }
    
    .input-group-modern .input-group-text {
        background: white;
        border: 2px solid var(--border-color);
        border-right: none;
        border-radius: 12px 0 0 12px;
        padding: 0.75rem 1rem;
        color: var(--navy-green);
        font-size: 1rem;
        transition: all 0.3s ease;
    }
    
    .modern-input {
        border: 2px solid var(--border-color);
        border-left: none;
        border-radius: 0 12px 12px 0;
        padding: 0.75rem 1rem;
        font-size: 0.95rem;
        transition: all 0.3s ease;
        background: white;
        height: auto;
    }
    
    .modern-input:focus {
        border-color: var(--navy-green);
        box-shadow: 0 0 0 3px var(--focus-shadow);
        background: white;
        outline: none;
    }
    
    .input-group-modern.focused .input-group-text,
    .input-group-modern:focus-within .input-group-text {
        border-color: var(--navy-green);
        background: var(--navy-green-very-light);
    }
    
    .input-group-modern.focused .modern-input,
    .input-group-modern:focus-within .modern-input {
        border-color: var(--navy-green);
    }
    
    /* Password Toggle Button */
    .btn-toggle-password {
        background: white;
        border: 2px solid var(--border-color);
        border-left: none;
        border-radius: 0 12px 12px 0;
        color: #6b7280;
        padding: 0.75rem 1rem;
        transition: all 0.3s ease;
    }
    
    .btn-toggle-password:hover {
        background: #f9fafb;
        color: var(--navy-green);
    }
    
    .btn-toggle-password.active {
        background: var(--navy-green-very-light);
        border-color: var(--navy-green);
        color: var(--navy-green);
    }
    
    /* Select Styling */
    .modern-input[type="select"] {
        appearance: none;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
        background-position: right 0.75rem center;
        background-repeat: no-repeat;
        background-size: 1.5em 1.5em;
        padding-right: 2.5rem;
    }
    
    /* Button Styles */
    .btn-check:checked + .btn {
        background: linear-gradient(135deg, var(--navy-green) 0%, var(--navy-green-light) 100%);
        border-color: var(--navy-green);
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(26, 58, 42, 0.3);
    }
    
    .btn-outline-success {
        border: 2px solid var(--border-color);
        color: #64748b;
        border-radius: 12px;
        transition: all 0.3s ease;
    }
    
    .btn-outline-success:hover {
        border-color: var(--navy-green);
        background: rgba(26, 58, 42, 0.05);
        color: var(--navy-green);
    }
    
    .btn-modern {
        background: linear-gradient(135deg, var(--navy-green) 0%, var(--navy-green-light) 100%);
        border: none;
        border-radius: 12px;
        font-weight: 600;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }
    
    .btn-modern:hover {
        background: linear-gradient(135deg, var(--navy-green-light) 0%, var(--navy-green-lighter) 100%);
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(26, 58, 42, 0.4);
    }
    
    .btn-modern:active {
        transform: translateY(0);
    }
    
    /* Feature Icons */
    .feature-icon {
        width: 50px;
        height: 50px;
        background: linear-gradient(135deg, var(--navy-green) 0%, var(--navy-green-light) 100%);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.2rem;
        margin: 0 auto;
        transition: all 0.3s ease;
    }
    
    /* Form Text */
    .form-text {
        font-size: 0.875rem;
        margin-top: 0.25rem;
    }
    
    /* Card Styles */
    .card {
        border-radius: 20px;
        border: none;
    }
    
    .card-body {
        border-radius: 20px;
    }
    
    /* Responsive Design */
    @roadside_rescue\venv\Lib\site-packages\streamlit\web\server\__pycache__\media_file_handler.cpython-313.pyc (max-width: 768px) {
        .card-body {
            padding: 2rem !important;
        }
        
        .input-group-modern {
            margin-bottom: 1rem;
        }
        
        .btn-check:checked + .btn {
            transform: none;
        }
        
        .btn-modern:hover {
            transform: none;
        }
    }
    
    /* Animation Improvements */
    .modern-input, .input-group-text, .btn-toggle-password {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
</style>
{% endblock %}
